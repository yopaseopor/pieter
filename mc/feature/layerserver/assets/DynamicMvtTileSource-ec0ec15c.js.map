{"version":3,"file":"DynamicMvtTileSource-ec0ec15c.js","sources":["../../src/Logic/FeatureSource/TiledFeatureSource/DynamicTileSource.ts","../../node_modules/pbf/index.js","../../node_modules/pbf/compile.js","../../node_modules/protocol-buffers-schema/tokenize.js","../../node_modules/protocol-buffers-schema/parse.js","../../node_modules/protocol-buffers-schema/stringify.js","../../node_modules/protocol-buffers-schema/index.js","../../src/Logic/FeatureSource/Sources/MvtSource.ts","../../src/Logic/FeatureSource/TiledFeatureSource/LineSourceMerger.ts","../../src/Logic/FeatureSource/TiledFeatureSource/PolygonSourceMerger.ts","../../src/Logic/FeatureSource/TiledFeatureSource/DynamicMvtTileSource.ts"],"sourcesContent":["import { Store, Stores } from \"../../UIEventSource\"\nimport { Tiles } from \"../../../Models/TileRange\"\nimport { BBox } from \"../../BBox\"\nimport { FeatureSource } from \"../FeatureSource\"\nimport FeatureSourceMerger from \"../Sources/FeatureSourceMerger\"\n\n\n/***\n * A tiled source which dynamically loads the required tiles at a fixed zoom level.\n * A single featureSource will be initialized for every tile in view; which will later be merged into this featureSource\n */\nexport default class DynamicTileSource<Src extends FeatureSource = FeatureSource> extends FeatureSourceMerger<Src> {\n    /**\n     *\n     * @param zoomlevel If {z} is specified in the source, the 'zoomlevel' will be used as zoomlevel to download from\n     * @param minzoom Only activate this feature source if zoomed in further then this\n     * @param constructSource\n     * @param mapProperties\n     * @param options\n     */\n    constructor(\n        zoomlevel: Store<number>,\n        minzoom: number,\n        constructSource: (tileIndex: number) => Src,\n        mapProperties: {\n            bounds: Store<BBox>\n            zoom: Store<number>\n        },\n        options?: {\n            isActive?: Store<boolean>\n        },\n    ) {\n        super()\n        const loadedTiles = new Set<number>()\n        const neededTiles: Store<number[]> = Stores.ListStabilized(\n            mapProperties.bounds\n                .mapD(\n                    (bounds) => {\n                        if (options?.isActive && !options?.isActive.data) {\n                            return undefined\n                        }\n\n                        if (mapProperties.zoom.data < minzoom) {\n                            return undefined\n                        }\n                        const z = Math.floor(zoomlevel.data)\n                        const tileRange = Tiles.TileRangeBetween(\n                            z,\n                            bounds.getNorth(),\n                            bounds.getEast(),\n                            bounds.getSouth(),\n                            bounds.getWest(),\n                        )\n                        if (tileRange.total > 500) {\n                            console.warn(\n                                \"Got a really big tilerange, bounds and location might be out of sync\",\n                            )\n                            return undefined\n                        }\n\n                        const needed = Tiles.MapRange(tileRange, (x, y) =>\n                            Tiles.tile_index(z, x, y),\n                        ).filter((i) => !loadedTiles.has(i))\n                        if (needed.length === 0) {\n                            return undefined\n                        }\n                        return needed\n                    },\n                    [options?.isActive, mapProperties.zoom],\n                )\n                .stabilized(250),\n        )\n\n        neededTiles.addCallbackAndRunD((neededIndexes) => {\n            for (const neededIndex of neededIndexes) {\n                loadedTiles.add(neededIndex)\n                super.addSource(constructSource(neededIndex))\n            }\n        })\n    }\n}\n\n\n","'use strict';\n\nmodule.exports = Pbf;\n\nvar ieee754 = require('ieee754');\n\nfunction Pbf(buf) {\n    this.buf = ArrayBuffer.isView && ArrayBuffer.isView(buf) ? buf : new Uint8Array(buf || 0);\n    this.pos = 0;\n    this.type = 0;\n    this.length = this.buf.length;\n}\n\nPbf.Varint  = 0; // varint: int32, int64, uint32, uint64, sint32, sint64, bool, enum\nPbf.Fixed64 = 1; // 64-bit: double, fixed64, sfixed64\nPbf.Bytes   = 2; // length-delimited: string, bytes, embedded messages, packed repeated fields\nPbf.Fixed32 = 5; // 32-bit: float, fixed32, sfixed32\n\nvar SHIFT_LEFT_32 = (1 << 16) * (1 << 16),\n    SHIFT_RIGHT_32 = 1 / SHIFT_LEFT_32;\n\n// Threshold chosen based on both benchmarking and knowledge about browser string\n// data structures (which currently switch structure types at 12 bytes or more)\nvar TEXT_DECODER_MIN_LENGTH = 12;\nvar utf8TextDecoder = typeof TextDecoder === 'undefined' ? null : new TextDecoder('utf8');\n\nPbf.prototype = {\n\n    destroy: function() {\n        this.buf = null;\n    },\n\n    // === READING =================================================================\n\n    readFields: function(readField, result, end) {\n        end = end || this.length;\n\n        while (this.pos < end) {\n            var val = this.readVarint(),\n                tag = val >> 3,\n                startPos = this.pos;\n\n            this.type = val & 0x7;\n            readField(tag, result, this);\n\n            if (this.pos === startPos) this.skip(val);\n        }\n        return result;\n    },\n\n    readMessage: function(readField, result) {\n        return this.readFields(readField, result, this.readVarint() + this.pos);\n    },\n\n    readFixed32: function() {\n        var val = readUInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    readSFixed32: function() {\n        var val = readInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    // 64-bit int handling is based on github.com/dpw/node-buffer-more-ints (MIT-licensed)\n\n    readFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readUInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readSFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readFloat: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 23, 4);\n        this.pos += 4;\n        return val;\n    },\n\n    readDouble: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 52, 8);\n        this.pos += 8;\n        return val;\n    },\n\n    readVarint: function(isSigned) {\n        var buf = this.buf,\n            val, b;\n\n        b = buf[this.pos++]; val  =  b & 0x7f;        if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 7;  if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 14; if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 21; if (b < 0x80) return val;\n        b = buf[this.pos];   val |= (b & 0x0f) << 28;\n\n        return readVarintRemainder(val, isSigned, this);\n    },\n\n    readVarint64: function() { // for compatibility with v2.0.1\n        return this.readVarint(true);\n    },\n\n    readSVarint: function() {\n        var num = this.readVarint();\n        return num % 2 === 1 ? (num + 1) / -2 : num / 2; // zigzag encoding\n    },\n\n    readBoolean: function() {\n        return Boolean(this.readVarint());\n    },\n\n    readString: function() {\n        var end = this.readVarint() + this.pos;\n        var pos = this.pos;\n        this.pos = end;\n\n        if (end - pos >= TEXT_DECODER_MIN_LENGTH && utf8TextDecoder) {\n            // longer strings are fast with the built-in browser TextDecoder API\n            return readUtf8TextDecoder(this.buf, pos, end);\n        }\n        // short strings are fast with our custom implementation\n        return readUtf8(this.buf, pos, end);\n    },\n\n    readBytes: function() {\n        var end = this.readVarint() + this.pos,\n            buffer = this.buf.subarray(this.pos, end);\n        this.pos = end;\n        return buffer;\n    },\n\n    // verbose for performance reasons; doesn't affect gzipped size\n\n    readPackedVarint: function(arr, isSigned) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readVarint(isSigned));\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readVarint(isSigned));\n        return arr;\n    },\n    readPackedSVarint: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readSVarint());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSVarint());\n        return arr;\n    },\n    readPackedBoolean: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readBoolean());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readBoolean());\n        return arr;\n    },\n    readPackedFloat: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readFloat());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFloat());\n        return arr;\n    },\n    readPackedDouble: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readDouble());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readDouble());\n        return arr;\n    },\n    readPackedFixed32: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readFixed32());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed32());\n        return arr;\n    },\n    readPackedSFixed32: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readSFixed32());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed32());\n        return arr;\n    },\n    readPackedFixed64: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readFixed64());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed64());\n        return arr;\n    },\n    readPackedSFixed64: function(arr) {\n        if (this.type !== Pbf.Bytes) return arr.push(this.readSFixed64());\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed64());\n        return arr;\n    },\n\n    skip: function(val) {\n        var type = val & 0x7;\n        if (type === Pbf.Varint) while (this.buf[this.pos++] > 0x7f) {}\n        else if (type === Pbf.Bytes) this.pos = this.readVarint() + this.pos;\n        else if (type === Pbf.Fixed32) this.pos += 4;\n        else if (type === Pbf.Fixed64) this.pos += 8;\n        else throw new Error('Unimplemented type: ' + type);\n    },\n\n    // === WRITING =================================================================\n\n    writeTag: function(tag, type) {\n        this.writeVarint((tag << 3) | type);\n    },\n\n    realloc: function(min) {\n        var length = this.length || 16;\n\n        while (length < this.pos + min) length *= 2;\n\n        if (length !== this.length) {\n            var buf = new Uint8Array(length);\n            buf.set(this.buf);\n            this.buf = buf;\n            this.length = length;\n        }\n    },\n\n    finish: function() {\n        this.length = this.pos;\n        this.pos = 0;\n        return this.buf.subarray(0, this.length);\n    },\n\n    writeFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeSFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeSFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeVarint: function(val) {\n        val = +val || 0;\n\n        if (val > 0xfffffff || val < 0) {\n            writeBigVarint(val, this);\n            return;\n        }\n\n        this.realloc(4);\n\n        this.buf[this.pos++] =           val & 0x7f  | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] =   (val >>> 7) & 0x7f;\n    },\n\n    writeSVarint: function(val) {\n        this.writeVarint(val < 0 ? -val * 2 - 1 : val * 2);\n    },\n\n    writeBoolean: function(val) {\n        this.writeVarint(Boolean(val));\n    },\n\n    writeString: function(str) {\n        str = String(str);\n        this.realloc(str.length * 4);\n\n        this.pos++; // reserve 1 byte for short string length\n\n        var startPos = this.pos;\n        // write the string directly to the buffer and see how much was written\n        this.pos = writeUtf8(this.buf, str, this.pos);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeFloat: function(val) {\n        this.realloc(4);\n        ieee754.write(this.buf, val, this.pos, true, 23, 4);\n        this.pos += 4;\n    },\n\n    writeDouble: function(val) {\n        this.realloc(8);\n        ieee754.write(this.buf, val, this.pos, true, 52, 8);\n        this.pos += 8;\n    },\n\n    writeBytes: function(buffer) {\n        var len = buffer.length;\n        this.writeVarint(len);\n        this.realloc(len);\n        for (var i = 0; i < len; i++) this.buf[this.pos++] = buffer[i];\n    },\n\n    writeRawMessage: function(fn, obj) {\n        this.pos++; // reserve 1 byte for short message length\n\n        // write the message directly to the buffer and see how much was written\n        var startPos = this.pos;\n        fn(obj, this);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeMessage: function(tag, fn, obj) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeRawMessage(fn, obj);\n    },\n\n    writePackedVarint:   function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedVarint, arr);   },\n    writePackedSVarint:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSVarint, arr);  },\n    writePackedBoolean:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedBoolean, arr);  },\n    writePackedFloat:    function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFloat, arr);    },\n    writePackedDouble:   function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedDouble, arr);   },\n    writePackedFixed32:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFixed32, arr);  },\n    writePackedSFixed32: function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSFixed32, arr); },\n    writePackedFixed64:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFixed64, arr);  },\n    writePackedSFixed64: function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSFixed64, arr); },\n\n    writeBytesField: function(tag, buffer) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeBytes(buffer);\n    },\n    writeFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFixed32(val);\n    },\n    writeSFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeSFixed32(val);\n    },\n    writeFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeFixed64(val);\n    },\n    writeSFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeSFixed64(val);\n    },\n    writeVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeVarint(val);\n    },\n    writeSVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeSVarint(val);\n    },\n    writeStringField: function(tag, str) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeString(str);\n    },\n    writeFloatField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFloat(val);\n    },\n    writeDoubleField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeDouble(val);\n    },\n    writeBooleanField: function(tag, val) {\n        this.writeVarintField(tag, Boolean(val));\n    }\n};\n\nfunction readVarintRemainder(l, s, p) {\n    var buf = p.buf,\n        h, b;\n\n    b = buf[p.pos++]; h  = (b & 0x70) >> 4;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 3;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 10; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 17; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 24; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x01) << 31; if (b < 0x80) return toNum(l, h, s);\n\n    throw new Error('Expected varint not more than 10 bytes');\n}\n\nfunction readPackedEnd(pbf) {\n    return pbf.type === Pbf.Bytes ?\n        pbf.readVarint() + pbf.pos : pbf.pos + 1;\n}\n\nfunction toNum(low, high, isSigned) {\n    if (isSigned) {\n        return high * 0x100000000 + (low >>> 0);\n    }\n\n    return ((high >>> 0) * 0x100000000) + (low >>> 0);\n}\n\nfunction writeBigVarint(val, pbf) {\n    var low, high;\n\n    if (val >= 0) {\n        low  = (val % 0x100000000) | 0;\n        high = (val / 0x100000000) | 0;\n    } else {\n        low  = ~(-val % 0x100000000);\n        high = ~(-val / 0x100000000);\n\n        if (low ^ 0xffffffff) {\n            low = (low + 1) | 0;\n        } else {\n            low = 0;\n            high = (high + 1) | 0;\n        }\n    }\n\n    if (val >= 0x10000000000000000 || val < -0x10000000000000000) {\n        throw new Error('Given varint doesn\\'t fit into 10 bytes');\n    }\n\n    pbf.realloc(10);\n\n    writeBigVarintLow(low, high, pbf);\n    writeBigVarintHigh(high, pbf);\n}\n\nfunction writeBigVarintLow(low, high, pbf) {\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos]   = low & 0x7f;\n}\n\nfunction writeBigVarintHigh(high, pbf) {\n    var lsb = (high & 0x07) << 4;\n\n    pbf.buf[pbf.pos++] |= lsb         | ((high >>>= 3) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f;\n}\n\nfunction makeRoomForExtraLength(startPos, len, pbf) {\n    var extraLen =\n        len <= 0x3fff ? 1 :\n        len <= 0x1fffff ? 2 :\n        len <= 0xfffffff ? 3 : Math.floor(Math.log(len) / (Math.LN2 * 7));\n\n    // if 1 byte isn't enough for encoding message length, shift the data to the right\n    pbf.realloc(extraLen);\n    for (var i = pbf.pos - 1; i >= startPos; i--) pbf.buf[i + extraLen] = pbf.buf[i];\n}\n\nfunction writePackedVarint(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeVarint(arr[i]);   }\nfunction writePackedSVarint(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeSVarint(arr[i]);  }\nfunction writePackedFloat(arr, pbf)    { for (var i = 0; i < arr.length; i++) pbf.writeFloat(arr[i]);    }\nfunction writePackedDouble(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeDouble(arr[i]);   }\nfunction writePackedBoolean(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeBoolean(arr[i]);  }\nfunction writePackedFixed32(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed32(arr[i]);  }\nfunction writePackedSFixed32(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed32(arr[i]); }\nfunction writePackedFixed64(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed64(arr[i]);  }\nfunction writePackedSFixed64(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed64(arr[i]); }\n\n// Buffer code below from https://github.com/feross/buffer, MIT-licensed\n\nfunction readUInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] * 0x1000000);\n}\n\nfunction writeInt32(buf, val, pos) {\n    buf[pos] = val;\n    buf[pos + 1] = (val >>> 8);\n    buf[pos + 2] = (val >>> 16);\n    buf[pos + 3] = (val >>> 24);\n}\n\nfunction readInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] << 24);\n}\n\nfunction readUtf8(buf, pos, end) {\n    var str = '';\n    var i = pos;\n\n    while (i < end) {\n        var b0 = buf[i];\n        var c = null; // codepoint\n        var bytesPerSequence =\n            b0 > 0xEF ? 4 :\n            b0 > 0xDF ? 3 :\n            b0 > 0xBF ? 2 : 1;\n\n        if (i + bytesPerSequence > end) break;\n\n        var b1, b2, b3;\n\n        if (bytesPerSequence === 1) {\n            if (b0 < 0x80) {\n                c = b0;\n            }\n        } else if (bytesPerSequence === 2) {\n            b1 = buf[i + 1];\n            if ((b1 & 0xC0) === 0x80) {\n                c = (b0 & 0x1F) << 0x6 | (b1 & 0x3F);\n                if (c <= 0x7F) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 3) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0xC | (b1 & 0x3F) << 0x6 | (b2 & 0x3F);\n                if (c <= 0x7FF || (c >= 0xD800 && c <= 0xDFFF)) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 4) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            b3 = buf[i + 3];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80 && (b3 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0x12 | (b1 & 0x3F) << 0xC | (b2 & 0x3F) << 0x6 | (b3 & 0x3F);\n                if (c <= 0xFFFF || c >= 0x110000) {\n                    c = null;\n                }\n            }\n        }\n\n        if (c === null) {\n            c = 0xFFFD;\n            bytesPerSequence = 1;\n\n        } else if (c > 0xFFFF) {\n            c -= 0x10000;\n            str += String.fromCharCode(c >>> 10 & 0x3FF | 0xD800);\n            c = 0xDC00 | c & 0x3FF;\n        }\n\n        str += String.fromCharCode(c);\n        i += bytesPerSequence;\n    }\n\n    return str;\n}\n\nfunction readUtf8TextDecoder(buf, pos, end) {\n    return utf8TextDecoder.decode(buf.subarray(pos, end));\n}\n\nfunction writeUtf8(buf, str, pos) {\n    for (var i = 0, c, lead; i < str.length; i++) {\n        c = str.charCodeAt(i); // code point\n\n        if (c > 0xD7FF && c < 0xE000) {\n            if (lead) {\n                if (c < 0xDC00) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                    lead = c;\n                    continue;\n                } else {\n                    c = lead - 0xD800 << 10 | c - 0xDC00 | 0x10000;\n                    lead = null;\n                }\n            } else {\n                if (c > 0xDBFF || (i + 1 === str.length)) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                } else {\n                    lead = c;\n                }\n                continue;\n            }\n        } else if (lead) {\n            buf[pos++] = 0xEF;\n            buf[pos++] = 0xBF;\n            buf[pos++] = 0xBD;\n            lead = null;\n        }\n\n        if (c < 0x80) {\n            buf[pos++] = c;\n        } else {\n            if (c < 0x800) {\n                buf[pos++] = c >> 0x6 | 0xC0;\n            } else {\n                if (c < 0x10000) {\n                    buf[pos++] = c >> 0xC | 0xE0;\n                } else {\n                    buf[pos++] = c >> 0x12 | 0xF0;\n                    buf[pos++] = c >> 0xC & 0x3F | 0x80;\n                }\n                buf[pos++] = c >> 0x6 & 0x3F | 0x80;\n            }\n            buf[pos++] = c & 0x3F | 0x80;\n        }\n    }\n    return pos;\n}\n","'use strict';\n\nmodule.exports = compile;\n\nvar version = require('./package.json').version;\n\nfunction compile(proto) {\n    var code = 'var exports = {};\\n';\n    code += compileRaw(proto) + '\\n';\n    code += 'return exports;\\n';\n    return new Function(code)();\n}\n\ncompile.raw = compileRaw;\n\nfunction compileRaw(proto, options) {\n    var pre = '\\'use strict\\'; // code generated by pbf v' + version + '\\n';\n    var context = buildDefaults(buildContext(proto, null), proto.syntax);\n    return pre + writeContext(context, options || {});\n}\n\nfunction writeContext(ctx, options) {\n    var code = '';\n    if (ctx._proto.fields) code += writeMessage(ctx, options);\n    if (ctx._proto.values) code += writeEnum(ctx, options);\n\n    for (var i = 0; i < ctx._children.length; i++) {\n        code += writeContext(ctx._children[i], options);\n    }\n    return code;\n}\n\nfunction writeMessage(ctx, options) {\n    var name = ctx._name;\n    var fields = ctx._proto.fields;\n    var numRepeated = 0;\n\n    var code = '\\n// ' + name + ' ========================================\\n\\n';\n\n    if (!options.noRead || !options.noWrite) {\n        code += compileExport(ctx, options) + ' {};\\n\\n';\n    }\n\n    if (!options.noRead) {\n        code += name + '.read = function (pbf, end) {\\n';\n        code += '    return pbf.readFields(' + name + '._readField, ' + compileDest(ctx) + ', end);\\n';\n        code += '};\\n';\n        code += name + '._readField = function (tag, obj, pbf) {\\n';\n\n        for (var i = 0; i < fields.length; i++) {\n            var field = fields[i];\n            var readCode = compileFieldRead(ctx, field);\n            var packed = willSupportPacked(ctx, field);\n            code += '    ' + (i ? 'else if' : 'if') +\n                ' (tag === ' + field.tag + ') ' +\n                (field.type === 'map' ? ' { ' : '') +\n                (\n                    field.type === 'map' ? compileMapRead(readCode, field.name, numRepeated++) :\n                    field.repeated && !packed ? 'obj.' + field.name + '.push(' + readCode + ')' :\n                    field.repeated && packed ? readCode : 'obj.' + field.name + ' = ' + readCode\n                );\n\n            if (field.oneof) {\n                code += ', obj.' + field.oneof + ' = ' + JSON.stringify(field.name);\n            }\n\n            code += ';' + (field.type === 'map' ? ' }' : '') + '\\n';\n        }\n        code += '};\\n';\n    }\n\n    if (!options.noWrite) {\n        code += name + '.write = function (obj, pbf) {\\n';\n        numRepeated = 0;\n        for (i = 0; i < fields.length; i++) {\n            field = fields[i];\n            var writeCode = field.repeated && !isPacked(field) ?\n                compileRepeatedWrite(ctx, field, numRepeated++) :\n                field.type === 'map' ? compileMapWrite(ctx, field, numRepeated++) :\n                compileFieldWrite(ctx, field, 'obj.' + field.name);\n            code += getDefaultWriteTest(ctx, field);\n            code += writeCode + ';\\n';\n        }\n        code += '};\\n';\n    }\n    return code;\n}\n\nfunction writeEnum(ctx, options) {\n    return '\\n' + compileExport(ctx, options) + ' ' +\n        JSON.stringify(ctx._proto.values, null, 4) + ';\\n';\n}\n\nfunction compileExport(ctx, options) {\n    var exportsVar = options.exports || 'exports';\n    return (ctx._root ? 'var ' + ctx._name + ' = ' + exportsVar + '.' : '') + ctx._name + ' =';\n}\n\nfunction compileDest(ctx) {\n    var props = {};\n    for (var i = 0; i < ctx._proto.fields.length; i++) {\n        var field = ctx._proto.fields[i];\n        props[field.name + ': ' + JSON.stringify(ctx._defaults[field.name])] = true;\n        if (field.oneof) props[field.oneof + ': null'] = true;\n    }\n    return '{' + Object.keys(props).join(', ') + '}';\n}\n\nfunction isEnum(type) {\n    return type && type._proto.values;\n}\n\nfunction getType(ctx, field) {\n    if (field.type === 'map') {\n        return ctx[getMapMessageName(field.tag)];\n    }\n\n    var path = field.type.split('.');\n    return path.reduce(function(ctx, name) { return ctx && ctx[name]; }, ctx);\n}\n\nfunction compileFieldRead(ctx, field) {\n    var type = getType(ctx, field);\n    if (type) {\n        if (type._proto.fields) return type._name + '.read(pbf, pbf.readVarint() + pbf.pos)';\n        if (!isEnum(type)) throw new Error('Unexpected type: ' + type._name);\n    }\n\n    var fieldType = isEnum(type) ? 'enum' : field.type;\n\n    var prefix = 'pbf.read';\n    var signed = fieldType === 'int32' || fieldType === 'int64' ? 'true' : '';\n    var suffix = '(' + signed + ')';\n\n    if (willSupportPacked(ctx, field)) {\n        prefix += 'Packed';\n        suffix = '(obj.' + field.name + (signed ? ', ' + signed : '') + ')';\n    }\n\n    switch (fieldType) {\n    case 'string':   return prefix + 'String' + suffix;\n    case 'float':    return prefix + 'Float' + suffix;\n    case 'double':   return prefix + 'Double' + suffix;\n    case 'bool':     return prefix + 'Boolean' + suffix;\n    case 'enum':\n    case 'uint32':\n    case 'uint64':\n    case 'int32':\n    case 'int64':    return prefix + 'Varint' + suffix;\n    case 'sint32':\n    case 'sint64':   return prefix + 'SVarint' + suffix;\n    case 'fixed32':  return prefix + 'Fixed32' + suffix;\n    case 'fixed64':  return prefix + 'Fixed64' + suffix;\n    case 'sfixed32': return prefix + 'SFixed32' + suffix;\n    case 'sfixed64': return prefix + 'SFixed64' + suffix;\n    case 'bytes':    return prefix + 'Bytes' + suffix;\n    default:         throw new Error('Unexpected type: ' + field.type);\n    }\n}\n\nfunction compileFieldWrite(ctx, field, name) {\n    var prefix = 'pbf.write';\n    if (isPacked(field)) prefix += 'Packed';\n\n    var postfix = (isPacked(field) ? '' : 'Field') + '(' + field.tag + ', ' + name + ')';\n\n    var type = getType(ctx, field);\n    if (type) {\n        if (type._proto.fields) return prefix + 'Message(' + field.tag + ', ' + type._name + '.write, ' + name + ')';\n        if (type._proto.values) return prefix + 'Varint' + postfix;\n        throw new Error('Unexpected type: ' + type._name);\n    }\n\n    switch (field.type) {\n    case 'string':   return prefix + 'String' + postfix;\n    case 'float':    return prefix + 'Float' + postfix;\n    case 'double':   return prefix + 'Double' + postfix;\n    case 'bool':     return prefix + 'Boolean' + postfix;\n    case 'enum':\n    case 'uint32':\n    case 'uint64':\n    case 'int32':\n    case 'int64':    return prefix + 'Varint' + postfix;\n    case 'sint32':\n    case 'sint64':   return prefix + 'SVarint' + postfix;\n    case 'fixed32':  return prefix + 'Fixed32' + postfix;\n    case 'fixed64':  return prefix + 'Fixed64' + postfix;\n    case 'sfixed32': return prefix + 'SFixed32' + postfix;\n    case 'sfixed64': return prefix + 'SFixed64' + postfix;\n    case 'bytes':    return prefix + 'Bytes' + postfix;\n    default:         throw new Error('Unexpected type: ' + field.type);\n    }\n}\n\nfunction compileMapRead(readCode, name, numRepeated) {\n    return (numRepeated ? '' : 'var ') + 'entry = ' + readCode + '; obj.' + name + '[entry.key] = entry.value';\n}\n\nfunction compileRepeatedWrite(ctx, field, numRepeated) {\n    return 'for (' + (numRepeated ? '' : 'var ') +\n        'i = 0; i < obj.' + field.name + '.length; i++) ' +\n        compileFieldWrite(ctx, field, 'obj.' + field.name + '[i]');\n}\n\nfunction compileMapWrite(ctx, field, numRepeated) {\n    var name = 'obj.' + field.name;\n\n    return 'for (' + (numRepeated ? '' : 'var ') +\n        'i in ' + name + ') if (Object.prototype.hasOwnProperty.call(' + name + ', i)) ' +\n        compileFieldWrite(ctx, field, '{ key: i, value: ' + name + '[i] }');\n}\n\nfunction getMapMessageName(tag) {\n    return '_FieldEntry' + tag;\n}\n\nfunction getMapField(name, type, tag) {\n    return {\n        name: name,\n        type: type,\n        tag: tag,\n        map: null,\n        oneof: null,\n        required: false,\n        repeated: false,\n        options: {}\n    };\n}\n\nfunction getMapMessage(field) {\n    return {\n        name: getMapMessageName(field.tag),\n        enums: [],\n        messages: [],\n        extensions: null,\n        fields: [\n            getMapField('key', field.map.from, 1),\n            getMapField('value', field.map.to, 2)\n        ]\n    };\n}\n\nfunction buildContext(proto, parent) {\n    var obj = Object.create(parent);\n    obj._proto = proto;\n    obj._children = [];\n    obj._defaults = {};\n\n    if (parent) {\n        parent[proto.name] = obj;\n\n        if (parent._name) {\n            obj._root = false;\n            obj._name = parent._name + '.' + proto.name;\n        } else {\n            obj._root = true;\n            obj._name = proto.name;\n        }\n    }\n\n    for (var i = 0; proto.enums && i < proto.enums.length; i++) {\n        obj._children.push(buildContext(proto.enums[i], obj));\n    }\n\n    for (i = 0; proto.messages && i < proto.messages.length; i++) {\n        obj._children.push(buildContext(proto.messages[i], obj));\n    }\n\n    for (i = 0; proto.fields && i < proto.fields.length; i++) {\n        if (proto.fields[i].type === 'map') {\n            obj._children.push(buildContext(getMapMessage(proto.fields[i]), obj));\n        }\n    }\n\n    return obj;\n}\n\nfunction getDefaultValue(field, value) {\n    // Defaults not supported for repeated fields\n    if (field.repeated) return [];\n\n    switch (field.type) {\n    case 'float':\n    case 'double':   return value ? parseFloat(value) : 0;\n    case 'uint32':\n    case 'uint64':\n    case 'int32':\n    case 'int64':\n    case 'sint32':\n    case 'sint64':\n    case 'fixed32':\n    case 'fixed64':\n    case 'sfixed32':\n    case 'sfixed64': return value ? parseInt(value, 10) : 0;\n    case 'string':   return value || '';\n    case 'bool':     return value === 'true';\n    case 'map':      return {};\n    default:         return null;\n    }\n}\n\nfunction willSupportPacked(ctx, field) {\n    var fieldType = isEnum(getType(ctx, field)) ? 'enum' : field.type;\n\n    switch (field.repeated && fieldType) {\n    case 'float':\n    case 'double':\n    case 'uint32':\n    case 'uint64':\n    case 'int32':\n    case 'int64':\n    case 'sint32':\n    case 'sint64':\n    case 'fixed32':\n    case 'fixed64':\n    case 'sfixed32':\n    case 'enum':\n    case 'bool': return true;\n    }\n\n    return false;\n}\n\nfunction setPackedOption(ctx, field, syntax) {\n    // No default packed in older protobuf versions\n    if (syntax < 3) return;\n\n    // Packed option already set\n    if (field.options.packed !== undefined) return;\n\n    // Not a packed field type\n    if (!willSupportPacked(ctx, field)) return;\n\n    field.options.packed = 'true';\n}\n\nfunction setDefaultValue(ctx, field, syntax) {\n    var options = field.options;\n    var type = getType(ctx, field);\n    var enumValues = type && type._proto.values;\n\n    // Proto3 does not support overriding defaults\n    var explicitDefault = syntax < 3 ? options.default : undefined;\n\n    // Set default for enum values\n    if (enumValues && !field.repeated) {\n        ctx._defaults[field.name] = enumValues[explicitDefault] || 0;\n\n    } else {\n        ctx._defaults[field.name] = getDefaultValue(field, explicitDefault);\n    }\n}\n\nfunction buildDefaults(ctx, syntax) {\n    var proto = ctx._proto;\n\n    for (var i = 0; i < ctx._children.length; i++) {\n        buildDefaults(ctx._children[i], syntax);\n    }\n\n    if (proto.fields) {\n        for (i = 0; i < proto.fields.length; i++) {\n            setPackedOption(ctx, proto.fields[i], syntax);\n            setDefaultValue(ctx, proto.fields[i], syntax);\n        }\n    }\n\n    return ctx;\n}\n\nfunction getDefaultWriteTest(ctx, field) {\n    var def = ctx._defaults[field.name];\n    var type = getType(ctx, field);\n    var code = '    if (obj.' + field.name;\n\n    if (!field.repeated && (!type || !type._proto.fields)) {\n        if (def === undefined || def) {\n            code += ' != undefined';\n        }\n        if (def) {\n            code += ' && obj.' + field.name + ' !== ' + JSON.stringify(def);\n        }\n    }\n\n    return code + ') ';\n}\n\nfunction isPacked(field) {\n    return field.options.packed === 'true';\n}\n","module.exports = function (sch) {\n  var noComments = function (line) {\n    var i = line.indexOf('//')\n    return i > -1 ? line.slice(0, i) : line\n  }\n\n  var noMultilineComments = function () {\n    var inside = false\n    return function (token) {\n      if (token === '/*') {\n        inside = true\n        return false\n      }\n      if (token === '*/') {\n        inside = false\n        return false\n      }\n      return !inside\n    }\n  }\n\n  var trim = function (line) {\n    return line.trim()\n  }\n\n  var removeQuotedLines = function (list) {\n    return function (str) {\n      var s = '$' + list.length + '$'\n      list.push(str)\n      return s\n    }\n  }\n\n  var restoreQuotedLines = function (list) {\n    var re = /^\\$(\\d+)\\$$/\n    return function (line) {\n      var m = line.match(re)\n      return m ? list[+m[1]] : line\n    }\n  }\n\n  var replacements = []\n  return sch\n    .replace(/\"(\\\\\"|[^\"\\n])*?\"|'(\\\\'|[^'\\n])*?'/gm, removeQuotedLines(replacements))\n    .replace(/([;,{}()=:[\\]<>]|\\/\\*|\\*\\/)/g, ' $1 ')\n    .split(/\\n/)\n    .map(trim)\n    .filter(Boolean)\n    .map(noComments)\n    .map(trim)\n    .filter(Boolean)\n    .join('\\n')\n    .split(/\\s+|\\n+/gm)\n    .filter(noMultilineComments())\n    .map(restoreQuotedLines(replacements))\n}\n","var tokenize = require('./tokenize')\nvar MAX_RANGE = 0x1FFFFFFF\n\n// \"Only repeated fields of primitive numeric types (types which use the varint, 32-bit, or 64-bit wire types) can be declared \"packed\".\"\n// https://developers.google.com/protocol-buffers/docs/encoding#optional\nvar PACKABLE_TYPES = [\n  // varint wire types\n  'int32', 'int64', 'uint32', 'uint64', 'sint32', 'sint64', 'bool',\n  // + ENUMS\n  // 64-bit wire types\n  'fixed64', 'sfixed64', 'double',\n  // 32-bit wire types\n  'fixed32', 'sfixed32', 'float'\n]\n\nvar onfieldoptionvalue = function (tokens) {\n  var value = tokens.shift()\n  if (value !== '{') {\n    return value\n  }\n  value = {}\n  var field = ''\n  while (tokens.length) {\n    switch (tokens[0]) {\n      case '}':\n        tokens.shift()\n        return value\n      case ':':\n        tokens.shift()\n        value[field] = onfieldoptionvalue(tokens)\n        break\n      default:\n        field = tokens.shift()\n    }\n  }\n}\n\nvar onfieldoptions = function (tokens) {\n  var opts = {}\n\n  while (tokens.length) {\n    switch (tokens[0]) {\n      case '[':\n      case ',': {\n        tokens.shift()\n        var name = tokens.shift()\n        if (name === '(') { // handling [(A) = B]\n          name = tokens.shift()\n          tokens.shift() // remove the end of bracket\n        }\n        var field = []\n        if (tokens[0][0] === '.') {\n          field = tokens[0].substr(1).split('.')\n          tokens.shift()\n        }\n        if (tokens[0] !== '=') throw new Error('Unexpected token in field options: ' + tokens[0])\n        tokens.shift()\n        if (tokens[0] === ']') throw new Error('Unexpected ] in field option')\n\n        // for option (A).b.c\n        // path will be ['A', 'b'] and lastFieldName 'c'\n        var path = [name].concat(field)\n        var lastFieldName = path.pop()\n\n        // opt references opts.A.b\n        var opt = path.reduce(function (opt, n, index) {\n          if (opt[n] == null) {\n            opt[n] = {}\n          }\n          return opt[n]\n        }, opts)\n\n        // now set opt['c'] that references opts.A.b['c']\n        opt[lastFieldName] = onfieldoptionvalue(tokens)\n        break\n      }\n      case ']':\n        tokens.shift()\n        return opts\n\n      default:\n        throw new Error('Unexpected token in field options: ' + tokens[0])\n    }\n  }\n\n  throw new Error('No closing tag for field options')\n}\n\nvar onfield = function (tokens) {\n  var field = {\n    name: null,\n    type: null,\n    tag: -1,\n    map: null,\n    oneof: null,\n    required: false,\n    repeated: false,\n    options: {}\n  }\n\n  while (tokens.length) {\n    switch (tokens[0]) {\n      case '=':\n        tokens.shift()\n        field.tag = Number(tokens.shift())\n        break\n\n      case 'map':\n        field.type = 'map'\n        field.map = { from: null, to: null }\n        tokens.shift()\n        if (tokens[0] !== '<') throw new Error('Unexpected token in map type: ' + tokens[0])\n        tokens.shift()\n        field.map.from = tokens.shift()\n        if (tokens[0] !== ',') throw new Error('Unexpected token in map type: ' + tokens[0])\n        tokens.shift()\n        field.map.to = tokens.shift()\n        if (tokens[0] !== '>') throw new Error('Unexpected token in map type: ' + tokens[0])\n        tokens.shift()\n        field.name = tokens.shift()\n        break\n\n      case 'repeated':\n      case 'required':\n      case 'optional':\n        var t = tokens.shift()\n        field.required = t === 'required'\n        field.repeated = t === 'repeated'\n        field.type = tokens.shift()\n        field.name = tokens.shift()\n        break\n\n      case '[':\n        field.options = onfieldoptions(tokens)\n        break\n\n      case ';':\n        if (field.name === null) throw new Error('Missing field name')\n        if (field.type === null) throw new Error('Missing type in message field: ' + field.name)\n        if (field.tag === -1) throw new Error('Missing tag number in message field: ' + field.name)\n        tokens.shift()\n        return field\n\n      default:\n        throw new Error('Unexpected token in message field: ' + tokens[0])\n    }\n  }\n\n  throw new Error('No ; found for message field')\n}\n\nvar onmessagebody = function (tokens) {\n  var body = {\n    enums: [],\n    options: {},\n    messages: [],\n    fields: [],\n    extends: [],\n    extensions: null\n  }\n\n  while (tokens.length) {\n    switch (tokens[0]) {\n      case 'map':\n      case 'repeated':\n      case 'optional':\n      case 'required':\n        body.fields.push(onfield(tokens))\n        break\n\n      case 'enum':\n        body.enums.push(onenum(tokens))\n        break\n\n      case 'message':\n        body.messages.push(onmessage(tokens))\n        break\n\n      case 'extensions':\n        body.extensions = onextensions(tokens)\n        break\n\n      case 'oneof':\n        tokens.shift()\n        var name = tokens.shift()\n        if (tokens[0] !== '{') throw new Error('Unexpected token in oneof: ' + tokens[0])\n        tokens.shift()\n        while (tokens[0] !== '}') {\n          tokens.unshift('optional')\n          var field = onfield(tokens)\n          field.oneof = name\n          body.fields.push(field)\n        }\n        tokens.shift()\n        break\n\n      case 'extend':\n        body.extends.push(onextend(tokens))\n        break\n\n      case ';':\n        tokens.shift()\n        break\n\n      case 'reserved':\n        tokens.shift()\n        while (tokens[0] !== ';') {\n          tokens.shift()\n        }\n        break\n\n      case 'option':\n        var opt = onoption(tokens)\n        if (body.options[opt.name] !== undefined) throw new Error('Duplicate option ' + opt.name)\n        body.options[opt.name] = opt.value\n        break\n\n      default:\n        // proto3 does not require the use of optional/required, assumed as optional\n        // \"singular: a well-formed message can have zero or one of this field (but not more than one).\"\n        // https://developers.google.com/protocol-buffers/docs/proto3#specifying-field-rules\n        tokens.unshift('optional')\n        body.fields.push(onfield(tokens))\n    }\n  }\n\n  return body\n}\n\nvar onextend = function (tokens) {\n  var out = {\n    name: tokens[1],\n    message: onmessage(tokens)\n  }\n  return out\n}\n\nvar onextensions = function (tokens) {\n  tokens.shift()\n  var from = Number(tokens.shift())\n  if (isNaN(from)) throw new Error('Invalid from in extensions definition')\n  if (tokens.shift() !== 'to') throw new Error(\"Expected keyword 'to' in extensions definition\")\n  var to = tokens.shift()\n  if (to === 'max') to = MAX_RANGE\n  to = Number(to)\n  if (isNaN(to)) throw new Error('Invalid to in extensions definition')\n  if (tokens.shift() !== ';') throw new Error('Missing ; in extensions definition')\n  return { from: from, to: to }\n}\nvar onmessage = function (tokens) {\n  tokens.shift()\n\n  var lvl = 1\n  var body = []\n  var msg = {\n    name: tokens.shift(),\n    options: {},\n    enums: [],\n    extends: [],\n    messages: [],\n    fields: []\n  }\n\n  if (tokens[0] !== '{') throw new Error('Expected { but found ' + tokens[0])\n  tokens.shift()\n\n  while (tokens.length) {\n    if (tokens[0] === '{') lvl++\n    else if (tokens[0] === '}') lvl--\n\n    if (!lvl) {\n      tokens.shift()\n      body = onmessagebody(body)\n      msg.enums = body.enums\n      msg.messages = body.messages\n      msg.fields = body.fields\n      msg.extends = body.extends\n      msg.extensions = body.extensions\n      msg.options = body.options\n      return msg\n    }\n\n    body.push(tokens.shift())\n  }\n\n  if (lvl) throw new Error('No closing tag for message')\n}\n\nvar onpackagename = function (tokens) {\n  tokens.shift()\n  var name = tokens.shift()\n  if (tokens[0] !== ';') throw new Error('Expected ; but found ' + tokens[0])\n  tokens.shift()\n  return name\n}\n\nvar onsyntaxversion = function (tokens) {\n  tokens.shift()\n\n  if (tokens[0] !== '=') throw new Error('Expected = but found ' + tokens[0])\n  tokens.shift()\n\n  var version = tokens.shift()\n  switch (version) {\n    case '\"proto2\"':\n      version = 2\n      break\n\n    case '\"proto3\"':\n      version = 3\n      break\n\n    default:\n      throw new Error('Expected protobuf syntax version but found ' + version)\n  }\n\n  if (tokens[0] !== ';') throw new Error('Expected ; but found ' + tokens[0])\n  tokens.shift()\n\n  return version\n}\n\nvar onenumvalue = function (tokens) {\n  if (tokens.length < 4) throw new Error('Invalid enum value: ' + tokens.slice(0, 3).join(' '))\n  if (tokens[0] === 'reserved') {\n    tokens.shift()\n    while (tokens[0] !== ';') {\n      tokens.shift()\n    }\n    tokens.shift()\n    return null\n  }\n  if (tokens[1] !== '=') throw new Error('Expected = but found ' + tokens[1])\n  if (tokens[3] !== ';' && tokens[3] !== '[') throw new Error('Expected ; or [ but found ' + tokens[1])\n\n  var name = tokens.shift()\n  tokens.shift()\n  var val = {\n    value: null,\n    options: {}\n  }\n  val.value = Number(tokens.shift())\n  if (tokens[0] === '[') {\n    val.options = onfieldoptions(tokens)\n  }\n  tokens.shift() // expecting the semicolon here\n\n  return {\n    name: name,\n    val: val\n  }\n}\n\nvar onenum = function (tokens) {\n  tokens.shift()\n  var options = {}\n  var e = {\n    name: tokens.shift(),\n    values: {},\n    options: {}\n  }\n\n  if (tokens[0] !== '{') throw new Error('Expected { but found ' + tokens[0])\n  tokens.shift()\n\n  while (tokens.length) {\n    if (tokens[0] === '}') {\n      tokens.shift()\n      // there goes optional semicolon after the enclosing \"}\"\n      if (tokens[0] === ';') tokens.shift()\n      return e\n    }\n    if (tokens[0] === 'option') {\n      options = onoption(tokens)\n      e.options[options.name] = options.value\n      continue\n    }\n    var val = onenumvalue(tokens)\n    if (val !== null) {\n      e.values[val.name] = val.val\n    }\n  }\n\n  throw new Error('No closing tag for enum')\n}\n\nvar onoption = function (tokens) {\n  var name = null\n  var value = null\n\n  var parse = function (value) {\n    if (value === 'true') return true\n    if (value === 'false') return false\n    return value.replace(/^\"+|\"+$/gm, '')\n  }\n\n  while (tokens.length) {\n    if (tokens[0] === ';') {\n      tokens.shift()\n      return { name: name, value: value }\n    }\n    switch (tokens[0]) {\n      case 'option':\n        tokens.shift()\n\n        var hasBracket = tokens[0] === '('\n        if (hasBracket) tokens.shift()\n\n        name = tokens.shift()\n\n        if (hasBracket) {\n          if (tokens[0] !== ')') throw new Error('Expected ) but found ' + tokens[0])\n          tokens.shift()\n        }\n\n        if (tokens[0][0] === '.') {\n          name += tokens.shift()\n        }\n\n        break\n\n      case '=':\n        tokens.shift()\n        if (name === null) throw new Error('Expected key for option with value: ' + tokens[0])\n        value = parse(tokens.shift())\n\n        if (name === 'optimize_for' && !/^(SPEED|CODE_SIZE|LITE_RUNTIME)$/.test(value)) {\n          throw new Error('Unexpected value for option optimize_for: ' + value)\n        } else if (value === '{') {\n          // option foo = {bar: baz}\n          value = onoptionMap(tokens)\n        }\n        break\n\n      default:\n        throw new Error('Unexpected token in option: ' + tokens[0])\n    }\n  }\n}\n\nvar onoptionMap = function (tokens) {\n  var parse = function (value) {\n    if (value === 'true') return true\n    if (value === 'false') return false\n    return value.replace(/^\"+|\"+$/gm, '')\n  }\n\n  var map = {}\n\n  while (tokens.length) {\n    if (tokens[0] === '}') {\n      tokens.shift()\n      return map\n    }\n\n    var hasBracket = tokens[0] === '('\n    if (hasBracket) tokens.shift()\n\n    var key = tokens.shift()\n    if (hasBracket) {\n      if (tokens[0] !== ')') throw new Error('Expected ) but found ' + tokens[0])\n      tokens.shift()\n    }\n\n    var value = null\n\n    switch (tokens[0]) {\n      case ':':\n        if (map[key] !== undefined) throw new Error('Duplicate option map key ' + key)\n\n        tokens.shift()\n\n        value = parse(tokens.shift())\n\n        if (value === '{') {\n          // option foo = {bar: baz}\n          value = onoptionMap(tokens)\n        }\n\n        map[key] = value\n\n        if (tokens[0] === ';') {\n          tokens.shift()\n        }\n        break\n\n      case '{':\n        tokens.shift()\n        value = onoptionMap(tokens)\n\n        if (map[key] === undefined) map[key] = []\n        if (!Array.isArray(map[key])) throw new Error('Duplicate option map key ' + key)\n\n        map[key].push(value)\n        break\n\n      default:\n        throw new Error('Unexpected token in option map: ' + tokens[0])\n    }\n  }\n\n  throw new Error('No closing tag for option map')\n}\n\nvar onimport = function (tokens) {\n  tokens.shift()\n  var file = tokens.shift().replace(/^\"+|\"+$/gm, '')\n\n  if (tokens[0] !== ';') throw new Error('Unexpected token: ' + tokens[0] + '. Expected \";\"')\n\n  tokens.shift()\n  return file\n}\n\nvar onservice = function (tokens) {\n  tokens.shift()\n\n  var service = {\n    name: tokens.shift(),\n    methods: [],\n    options: {}\n  }\n\n  if (tokens[0] !== '{') throw new Error('Expected { but found ' + tokens[0])\n  tokens.shift()\n\n  while (tokens.length) {\n    if (tokens[0] === '}') {\n      tokens.shift()\n      // there goes optional semicolon after the enclosing \"}\"\n      if (tokens[0] === ';') tokens.shift()\n      return service\n    }\n\n    switch (tokens[0]) {\n      case 'option':\n        var opt = onoption(tokens)\n        if (service.options[opt.name] !== undefined) throw new Error('Duplicate option ' + opt.name)\n        service.options[opt.name] = opt.value\n        break\n      case 'rpc':\n        service.methods.push(onrpc(tokens))\n        break\n      default:\n        throw new Error('Unexpected token in service: ' + tokens[0])\n    }\n  }\n\n  throw new Error('No closing tag for service')\n}\n\nvar onrpc = function (tokens) {\n  tokens.shift()\n\n  var rpc = {\n    name: tokens.shift(),\n    input_type: null,\n    output_type: null,\n    client_streaming: false,\n    server_streaming: false,\n    options: {}\n  }\n\n  if (tokens[0] !== '(') throw new Error('Expected ( but found ' + tokens[0])\n  tokens.shift()\n\n  if (tokens[0] === 'stream') {\n    tokens.shift()\n    rpc.client_streaming = true\n  }\n\n  rpc.input_type = tokens.shift()\n\n  if (tokens[0] !== ')') throw new Error('Expected ) but found ' + tokens[0])\n  tokens.shift()\n\n  if (tokens[0] !== 'returns') throw new Error('Expected returns but found ' + tokens[0])\n  tokens.shift()\n\n  if (tokens[0] !== '(') throw new Error('Expected ( but found ' + tokens[0])\n  tokens.shift()\n\n  if (tokens[0] === 'stream') {\n    tokens.shift()\n    rpc.server_streaming = true\n  }\n\n  rpc.output_type = tokens.shift()\n\n  if (tokens[0] !== ')') throw new Error('Expected ) but found ' + tokens[0])\n  tokens.shift()\n\n  if (tokens[0] === ';') {\n    tokens.shift()\n    return rpc\n  }\n\n  if (tokens[0] !== '{') throw new Error('Expected { but found ' + tokens[0])\n  tokens.shift()\n\n  while (tokens.length) {\n    if (tokens[0] === '}') {\n      tokens.shift()\n      // there goes optional semicolon after the enclosing \"}\"\n      if (tokens[0] === ';') tokens.shift()\n      return rpc\n    }\n\n    if (tokens[0] === 'option') {\n      var opt = onoption(tokens)\n      if (rpc.options[opt.name] !== undefined) throw new Error('Duplicate option ' + opt.name)\n      rpc.options[opt.name] = opt.value\n    } else {\n      throw new Error('Unexpected token in rpc options: ' + tokens[0])\n    }\n  }\n\n  throw new Error('No closing tag for rpc')\n}\n\nvar parse = function (buf) {\n  var tokens = tokenize(buf.toString())\n  // check for isolated strings in tokens by looking for opening quote\n  for (var i = 0; i < tokens.length; i++) {\n    if (/^(\"|')([^'\"]*)$/.test(tokens[i])) {\n      var j\n      if (tokens[i].length === 1) {\n        j = i + 1\n      } else {\n        j = i\n      }\n      // look ahead for the closing quote and collapse all\n      // in-between tokens into a single token\n      for (j; j < tokens.length; j++) {\n        if (/^[^'\"\\\\]*(?:\\\\.[^'\"\\\\]*)*(\"|')$/.test(tokens[j])) {\n          tokens = tokens.slice(0, i).concat(tokens.slice(i, j + 1).join('')).concat(tokens.slice(j + 1))\n          break\n        }\n      }\n    }\n  }\n  var schema = {\n    syntax: 3,\n    package: null,\n    imports: [],\n    enums: [],\n    messages: [],\n    options: {},\n    extends: []\n  }\n\n  var firstline = true\n\n  while (tokens.length) {\n    switch (tokens[0]) {\n      case 'package':\n        schema.package = onpackagename(tokens)\n        break\n\n      case 'syntax':\n        if (!firstline) throw new Error('Protobuf syntax version should be first thing in file')\n        schema.syntax = onsyntaxversion(tokens)\n        break\n\n      case 'message':\n        schema.messages.push(onmessage(tokens))\n        break\n\n      case 'enum':\n        schema.enums.push(onenum(tokens))\n        break\n\n      case 'option':\n        var opt = onoption(tokens)\n        if (schema.options[opt.name]) throw new Error('Duplicate option ' + opt.name)\n        schema.options[opt.name] = opt.value\n        break\n\n      case 'import':\n        schema.imports.push(onimport(tokens))\n        break\n\n      case 'extend':\n        schema.extends.push(onextend(tokens))\n        break\n\n      case 'service':\n        if (!schema.services) schema.services = []\n        schema.services.push(onservice(tokens))\n        break\n\n      default:\n        throw new Error('Unexpected token: ' + tokens[0])\n    }\n    firstline = false\n  }\n\n  // now iterate over messages and propagate extends\n  schema.extends.forEach(function (ext) {\n    schema.messages.forEach(function (msg) {\n      if (msg.name === ext.name) {\n        ext.message.fields.forEach(function (field) {\n          if (!msg.extensions || field.tag < msg.extensions.from || field.tag > msg.extensions.to) {\n            throw new Error(msg.name + ' does not declare ' + field.tag + ' as an extension number')\n          }\n          msg.fields.push(field)\n        })\n      }\n    })\n  })\n\n  schema.messages.forEach(function (msg) {\n    msg.fields.forEach(function (field) {\n      var fieldSplit\n      var messageName\n      var nestedEnumName\n      var message\n\n      function enumNameIsFieldType (en) {\n        return en.name === field.type\n      }\n\n      function enumNameIsNestedEnumName (en) {\n        return en.name === nestedEnumName\n      }\n\n      if (field.options && field.options.packed === 'true') {\n        if (PACKABLE_TYPES.indexOf(field.type) === -1) {\n          // let's see if it's an enum\n          if (field.type.indexOf('.') === -1) {\n            if (msg.enums && msg.enums.some(enumNameIsFieldType)) {\n              return\n            }\n          } else {\n            fieldSplit = field.type.split('.')\n            if (fieldSplit.length > 2) {\n              throw new Error('what is this?')\n            }\n\n            messageName = fieldSplit[0]\n            nestedEnumName = fieldSplit[1]\n\n            schema.messages.some(function (msg) {\n              if (msg.name === messageName) {\n                message = msg\n                return msg\n              }\n            })\n\n            if (message && message.enums && message.enums.some(enumNameIsNestedEnumName)) {\n              return\n            }\n          }\n\n          throw new Error(\n            'Fields of type ' + field.type + ' cannot be declared [packed=true]. ' +\n            'Only repeated fields of primitive numeric types (types which use ' +\n            'the varint, 32-bit, or 64-bit wire types) can be declared \"packed\". ' +\n            'See https://developers.google.com/protocol-buffers/docs/encoding#optional'\n          )\n        }\n      }\n    })\n  })\n\n  return schema\n}\n\nmodule.exports = parse\n","var onimport = function (i, result) {\n  result.push('import \"' + i + '\";', '')\n  return result\n}\n\nvar onfield = function (f, result) {\n  var prefix = f.repeated ? 'repeated' : f.required ? 'required' : 'optional'\n  if (f.type === 'map') prefix = 'map<' + f.map.from + ',' + f.map.to + '>'\n  if (f.oneof) prefix = ''\n\n  var opts = Object.keys(f.options || {}).map(function (key) {\n    return key + ' = ' + f.options[key]\n  }).join(',')\n\n  if (opts) opts = ' [' + opts + ']'\n\n  result.push((prefix ? prefix + ' ' : '') + (f.map === 'map' ? '' : f.type + ' ') + f.name + ' = ' + f.tag + opts + ';')\n  return result\n}\n\nvar onmessage = function (m, result) {\n  result.push('message ' + m.name + ' {')\n\n  if (!m.options) m.options = {}\n  onoption(m.options, result)\n\n  if (!m.enums) m.enums = []\n  m.enums.forEach(function (e) {\n    result.push(onenum(e, []))\n  })\n\n  if (!m.messages) m.messages = []\n  m.messages.forEach(function (m) {\n    result.push(onmessage(m, []))\n  })\n\n  var oneofs = {}\n\n  if (!m.fields) m.fields = []\n  m.fields.forEach(function (f) {\n    if (f.oneof) {\n      if (!oneofs[f.oneof]) oneofs[f.oneof] = []\n      oneofs[f.oneof].push(onfield(f, []))\n    } else {\n      result.push(onfield(f, []))\n    }\n  })\n\n  Object.keys(oneofs).forEach(function (n) {\n    oneofs[n].unshift('oneof ' + n + ' {')\n    oneofs[n].push('}')\n    result.push(oneofs[n])\n  })\n\n  result.push('}', '')\n  return result\n}\n\nvar onenum = function (e, result) {\n  result.push('enum ' + e.name + ' {')\n  if (!e.options) e.options = {}\n  var options = onoption(e.options, [])\n  if (options.length > 1) {\n    result.push(options.slice(0, -1))\n  }\n  Object.keys(e.values).map(function (v) {\n    var val = onenumvalue(e.values[v])\n    result.push([v + ' = ' + val + ';'])\n  })\n  result.push('}', '')\n  return result\n}\n\nvar onenumvalue = function (v, result) {\n  var opts = Object.keys(v.options || {}).map(function (key) {\n    return key + ' = ' + v.options[key]\n  }).join(',')\n\n  if (opts) opts = ' [' + opts + ']'\n  var val = v.value + opts\n  return val\n}\n\nvar onoption = function (o, result) {\n  var keys = Object.keys(o)\n  keys.forEach(function (option) {\n    var v = o[option]\n    if (~option.indexOf('.')) option = '(' + option + ')'\n\n    var type = typeof v\n\n    if (type === 'object') {\n      v = onoptionMap(v, [])\n      if (v.length) result.push('option ' + option + ' = {', v, '};')\n    } else {\n      if (type === 'string' && option !== 'optimize_for') v = '\"' + v + '\"'\n      result.push('option ' + option + ' = ' + v + ';')\n    }\n  })\n  if (keys.length > 0) {\n    result.push('')\n  }\n\n  return result\n}\n\nvar onoptionMap = function (o, result) {\n  var keys = Object.keys(o)\n  keys.forEach(function (k) {\n    var v = o[k]\n\n    var type = typeof v\n\n    if (type === 'object') {\n      if (Array.isArray(v)) {\n        v.forEach(function (v) {\n          v = onoptionMap(v, [])\n          if (v.length) result.push(k + ' {', v, '}')\n        })\n      } else {\n        v = onoptionMap(v, [])\n        if (v.length) result.push(k + ' {', v, '}')\n      }\n    } else {\n      if (type === 'string') v = '\"' + v + '\"'\n      result.push(k + ': ' + v)\n    }\n  })\n\n  return result\n}\n\nvar onservices = function (s, result) {\n  result.push('service ' + s.name + ' {')\n\n  if (!s.options) s.options = {}\n  onoption(s.options, result)\n  if (!s.methods) s.methods = []\n  s.methods.forEach(function (m) {\n    result.push(onrpc(m, []))\n  })\n\n  result.push('}', '')\n  return result\n}\n\nvar onrpc = function (rpc, result) {\n  var def = 'rpc ' + rpc.name + '('\n  if (rpc.client_streaming) def += 'stream '\n  def += rpc.input_type + ') returns ('\n  if (rpc.server_streaming) def += 'stream '\n  def += rpc.output_type + ')'\n\n  if (!rpc.options) rpc.options = {}\n\n  var options = onoption(rpc.options, [])\n  if (options.length > 1) {\n    result.push(def + ' {', options.slice(0, -1), '}')\n  } else {\n    result.push(def + ';')\n  }\n\n  return result\n}\n\nvar indent = function (lvl) {\n  return function (line) {\n    if (Array.isArray(line)) return line.map(indent(lvl + '  ')).join('\\n')\n    return lvl + line\n  }\n}\n\nmodule.exports = function (schema) {\n  var result = []\n\n  result.push('syntax = \"proto' + schema.syntax + '\";', '')\n\n  if (schema.package) result.push('package ' + schema.package + ';', '')\n\n  if (schema.imports) {\n    schema.imports.forEach(function (i) {\n      onimport(i, result)\n    })\n  }\n\n  if (!schema.options) schema.options = {}\n\n  onoption(schema.options, result)\n\n  if (!schema.enums) schema.enums = []\n  schema.enums.forEach(function (e) {\n    onenum(e, result)\n  })\n\n  if (!schema.messages) schema.messages = []\n  schema.messages.forEach(function (m) {\n    onmessage(m, result)\n  })\n\n  if (schema.services) {\n    schema.services.forEach(function (s) {\n      onservices(s, result)\n    })\n  }\n  return result.map(indent('')).join('\\n')\n}\n","var parse = require('./parse')\nvar stringify = require('./stringify')\n\nmodule.exports = parse\nmodule.exports.parse = parse\nmodule.exports.stringify = stringify\n","import { Feature, Geometry } from \"geojson\"\nimport { Store, UIEventSource } from \"../../UIEventSource\"\nimport { FeatureSourceForTile } from \"../FeatureSource\"\nimport Pbf from \"pbf\"\nimport * as pbfCompile from \"pbf/compile\"\nimport * as PbfSchema from \"protocol-buffers-schema\"\n\ntype Coords = [number, number][]\n\nclass MvtFeatureBuilder {\n    private static readonly geom_types = [\"Unknown\", \"Point\", \"LineString\", \"Polygon\"] as const\n    private readonly _size: number\n    private readonly _x0: number\n    private readonly _y0: number\n\n    constructor(extent: number, x: number, y: number, z: number) {\n        this._size = extent * Math.pow(2, z)\n        this._x0 = extent * x\n        this._y0 = extent * y\n    }\n\n    private static signedArea(ring: Coords): number {\n        let sum = 0\n        const len = ring.length\n        // J is basically (i - 1) % len\n        let j = len - 1\n        let p1\n        let p2\n        for (let i = 0; i < len; i++) {\n            p1 = ring[i]\n            p2 = ring[j]\n            sum += (p2.x - p1.x) * (p1.y + p2.y)\n            j = i\n        }\n        return sum\n    }\n\n    /**\n     *\n     * const rings = [   [     [       3.208361864089966,       51.186908820014736     ],     [       3.2084155082702637,       51.18689537073311     ],     [       3.208436965942383,       51.186888646090836     ],     [       3.2084155082702637,       51.18686174751187     ],     [       3.2084155082702637,       51.18685502286465     ],     [       3.2083725929260254,       51.18686847215807     ],     [       3.2083404064178467,       51.18687519680333     ],     [       3.208361864089966,       51.186908820014736     ]   ] ]\n     * MvtFeatureBuilder.classifyRings(rings) // => [rings]\n     */\n    private static classifyRings(rings: Coords[]): Coords[][] {\n        if (rings.length <= 0) {\n            throw \"Now rings in polygon found\"\n        }\n        if (rings.length == 1) {\n            return [rings]\n        }\n\n        const polygons: Coords[][] = []\n        let currentPolygon: Coords[]\n\n        for (let i = 0; i < rings.length; i++) {\n            let ring = rings[i]\n            const area = this.signedArea(ring)\n            if (area === 0) {\n                // Weird, degenerate ring\n                continue\n            }\n            const ccw = area < 0\n\n            if (ccw === (area < 0)) {\n                if (currentPolygon) {\n                    polygons.push(currentPolygon)\n                }\n                currentPolygon = [ring]\n\n            } else {\n                currentPolygon.push(ring)\n            }\n        }\n        if (currentPolygon) {\n            polygons.push(currentPolygon)\n        }\n\n        return polygons\n    }\n\n    public toGeoJson(geometry: number[], typeIndex: 1 | 2 | 3, properties: any): Feature {\n        let coords: Coords[] = this.encodeGeometry(geometry)\n        let classified = undefined\n        switch (typeIndex) {\n            case 1:\n                const points = []\n                for (let i = 0; i < coords.length; i++) {\n                    points[i] = coords[i][0]\n                }\n                coords = points\n                this.project(<any>coords)\n                break\n\n            case 2:\n                for (let i = 0; i < coords.length; i++) {\n                    this.project(coords[i])\n                }\n                break\n\n            case 3:\n                classified = MvtFeatureBuilder.classifyRings(coords)\n                for (let i = 0; i < classified.length; i++) {\n                    for (let j = 0; j < classified[i].length; j++) {\n                        this.project(classified[i][j])\n                    }\n                }\n                break\n        }\n\n        let type: string = MvtFeatureBuilder.geom_types[typeIndex]\n        let polygonCoords: Coords | Coords[] | Coords[][]\n        if (coords.length === 1) {\n            polygonCoords = (classified ?? coords)[0]\n        } else {\n            polygonCoords = classified ?? coords\n            type = \"Multi\" + type\n        }\n\n        return {\n            type: \"Feature\",\n            geometry: {\n                type: <any>type,\n                coordinates: <any>polygonCoords,\n            },\n            properties,\n        }\n    }\n\n    /**\n     *\n     * const geometry = [9,233,8704,130,438,1455,270,653,248,423,368,493,362,381,330,267,408,301,406,221,402,157,1078,429,1002,449,1036,577,800,545,1586,1165,164,79,40]\n     * const builder = new MvtFeatureBuilder(4096, 66705, 43755, 17)\n     * const expected = [[3.2106759399175644,51.213658395282124],[3.2108227908611298,51.21396418776169],[3.2109133154153824,51.21410154168976],[3.210996463894844,51.214190590500664],[3.211119845509529,51.214294340548975],[3.211241215467453,51.2143745681588],[3.2113518565893173,51.21443085341426],[3.211488649249077,51.21449427925393],[3.2116247713565826,51.214540903490956],[3.211759552359581,51.21457408647774],[3.2121209800243378,51.214664394485254],[3.212456926703453,51.21475890267553],[3.2128042727708817,51.214880292910834],[3.213072493672371,51.214994962285544],[3.2136042416095734,51.21523984134939],[3.2136592268943787,51.21525664260963],[3.213672637939453,51.21525664260963]]\n     * builder.project(builder.encodeGeometry(geometry)[0]) // => expected\n     * @param geometry\n     * @private\n     */\n    private encodeGeometry(geometry: number[]): Coords[] {\n        let cX = 0\n        let cY = 0\n        let coordss: Coords[] = []\n        let currentRing: Coords = []\n        for (let i = 0; i < geometry.length; i++) {\n            let commandInteger = geometry[i]\n            let commandId = commandInteger & 0x7\n            let commandCount = commandInteger >> 3\n            /*\n            Command \tId \tParameters \tParameter Count\n                        MoveTo \t1 \tdX, dY \t2\n                        LineTo \t2 \tdX, dY \t2\n                        ClosePath \t7 \tNo parameters \t0\n            */\n            if (commandId === 1) {\n                // MoveTo means: we start a new ring\n                if (currentRing.length !== 0) {\n                    coordss.push(currentRing)\n                    currentRing = []\n                }\n            }\n            if (commandId === 1 || commandId === 2) {\n                for (let j = 0; j < commandCount; j++) {\n                    const dx = geometry[i + j * 2 + 1]\n                    cX += ((dx >> 1) ^ (-(dx & 1)))\n                    const dy = geometry[i + j * 2 + 2]\n                    cY += ((dy >> 1) ^ (-(dy & 1)))\n                    currentRing.push([cX, cY])\n                }\n                i += commandCount * 2\n            }\n            if (commandId === 7) {\n                currentRing.push([...currentRing[0]])\n                i++\n            }\n\n        }\n        if (currentRing.length > 0) {\n            coordss.push(currentRing)\n        }\n        return coordss\n    }\n\n    /**\n     * Inline replacement of the location by projecting\n     * @param line the line which will be rewritten inline\n     * @return line\n     */\n    private project(line: Coords) {\n        const y0 = this._y0\n        const x0 = this._x0\n        const size = this._size\n        for (let i = 0; i < line.length; i++) {\n            let p = line[i]\n            let y2 = 180 - (p[1] + y0) * 360 / size\n            line[i] = [\n                (p[0] + x0) * 360 / size - 180,\n                360 / Math.PI * Math.atan(Math.exp(y2 * Math.PI / 180)) - 90,\n            ]\n        }\n        return line\n    }\n}\n\nexport default class MvtSource implements FeatureSourceForTile {\n\n    private static readonly schemaSpec21 = `\n    package vector_tile;\n\noption optimize_for = LITE_RUNTIME;\n\nmessage Tile {\n\n        // GeomType is described in section 4.3.4 of the specification\n        enum GeomType {\n             UNKNOWN = 0;\n             POINT = 1;\n             LINESTRING = 2;\n             POLYGON = 3;\n        }\n\n        // Variant type encoding\n        // The use of values is described in section 4.1 of the specification\n        message Value {\n                // Exactly one of these values must be present in a valid message\n                optional string string_value = 1;\n                optional float float_value = 2;\n                optional double double_value = 3;\n                optional int64 int_value = 4;\n                optional uint64 uint_value = 5;\n                optional sint64 sint_value = 6;\n                optional bool bool_value = 7;\n\n                extensions 8 to max;\n        }\n\n        // Features are described in section 4.2 of the specification\n        message Feature {\n                optional uint64 id = 1 [ default = 0 ];\n\n                // Tags of this feature are encoded as repeated pairs of\n                // integers.\n                // A detailed description of tags is located in sections\n                // 4.2 and 4.4 of the specification\n                repeated uint32 tags = 2 [ packed = true ];\n\n                // The type of geometry stored in this feature.\n                optional GeomType type = 3 [ default = UNKNOWN ];\n\n                // Contains a stream of commands and parameters (vertices).\n                // A detailed description on geometry encoding is located in\n                // section 4.3 of the specification.\n                repeated uint32 geometry = 4 [ packed = true ];\n        }\n\n        // Layers are described in section 4.1 of the specification\n        message Layer {\n                // Any compliant implementation must first read the version\n                // number encoded in this message and choose the correct\n                // implementation for this version number before proceeding to\n                // decode other parts of this message.\n                required uint32 version = 15 [ default = 1 ];\n\n                required string name = 1;\n\n                // The actual features in this tile.\n                repeated Feature features = 2;\n\n                // Dictionary encoding for keys\n                repeated string keys = 3;\n\n                // Dictionary encoding for values\n                repeated Value values = 4;\n\n                // Although this is an \"optional\" field it is required by the specification.\n                // See https://github.com/mapbox/vector-tile-spec/issues/47\n                optional uint32 extent = 5 [ default = 4096 ];\n\n                extensions 16 to max;\n        }\n\n        repeated Layer layers = 3;\n\n        extensions 16 to 8191;\n}\n`\n    private static readonly tile_schema = (pbfCompile.default ?? pbfCompile)(PbfSchema.parse(MvtSource.schemaSpec21)).Tile\n    public readonly features: Store<Feature<Geometry, { [name: string]: any }>[]>\n    private readonly _url: string\n    private readonly _layerName: string\n    private readonly _features: UIEventSource<Feature<Geometry, {\n        [name: string]: any\n    }>[]> = new UIEventSource<Feature<Geometry, { [p: string]: any }>[]>([])\n    public readonly x: number\n    public readonly y: number\n    public readonly z: number\n\n    constructor(url: string, x: number, y: number, z: number, layerName?: string, isActive?: Store<boolean>) {\n        this._url = url\n        this._layerName = layerName\n        this.x = x\n        this.y = y\n        this.z = z\n        this.downloadSync()\n        this.features = this._features.map(fs => {\n            if (fs === undefined || isActive?.data === false) {\n                return []\n            }\n            return fs\n        }, [isActive])\n    }\n\n    private getValue(v: {\n        // Exactly one of these values must be present in a valid message\n        string_value?: string,\n        float_value?: number,\n        double_value?: number,\n        int_value?: number,\n        uint_value?: number,\n        sint_value?: number,\n        bool_value?: boolean\n    }): string | number | undefined | boolean {\n        if (v.string_value !== \"\") {\n            return v.string_value\n        }\n        if (v.double_value !== 0) {\n            return v.double_value\n        }\n        if (v.float_value !== 0) {\n            return v.float_value\n        }\n        if (v.int_value !== 0) {\n            return v.int_value\n        }\n        if (v.uint_value !== 0) {\n            return v.uint_value\n        }\n        if (v.sint_value !== 0) {\n            return v.sint_value\n        }\n        if (v.bool_value !== false) {\n            return v.bool_value\n        }\n        return undefined\n\n    }\n\n    private downloadSync() {\n        this.download().then(d => {\n            if (d.length === 0) {\n                return\n            }\n            return this._features.setData(d)\n        }).catch(e => {\n            console.error(e)\n        })\n    }\n\n    private async download(): Promise<Feature[]> {\n        const result = await fetch(this._url)\n        if (result.status !== 200) {\n            console.error(\"Could not download tile \" + this._url)\n            return []\n        }\n        const buffer = await result.arrayBuffer()\n        const data = MvtSource.tile_schema.read(new Pbf(buffer))\n        const layers = data.layers\n        let layer = data.layers[0]\n        if (layers.length > 1) {\n            if (!this._layerName) {\n                throw \"Multiple layers in the downloaded tile, but no layername is given to choose from\"\n            }\n            layer = layers.find(l => l.name === this._layerName)\n        }\n        if (!layer) {\n            return []\n        }\n        const builder = new MvtFeatureBuilder(layer.extent, this.x, this.y, this.z)\n        const features: Feature[] = []\n\n        for (const feature of layer.features) {\n            const properties = this.inflateProperties(feature.tags, layer.keys, layer.values)\n            features.push(builder.toGeoJson(feature.geometry, feature.type, properties))\n        }\n\n        return features\n    }\n\n\n    private inflateProperties(tags: number[], keys: string[], values: { string_value: string }[]) {\n        const properties = {}\n        for (let i = 0; i < tags.length; i += 2) {\n            properties[keys[tags[i]]] = this.getValue(values[tags[i + 1]])\n        }\n        let type: string\n        switch (properties[\"osm_type\"]) {\n            case \"N\":\n                type = \"node\"\n                break\n            case \"W\":\n                type = \"way\"\n                break\n            case \"R\":\n                type = \"relation\"\n                break\n        }\n        properties[\"id\"] = type + \"/\" + properties[\"osm_id\"]\n        delete properties[\"osm_id\"]\n        delete properties[\"osm_type\"]\n\n        return properties\n    }\n\n}\n","import { FeatureSourceForTile } from \"../FeatureSource\"\nimport { Store } from \"../../UIEventSource\"\nimport { BBox } from \"../../BBox\"\nimport { Utils } from \"../../../Utils\"\nimport { Feature, LineString, MultiLineString, Position } from \"geojson\"\nimport { Tiles } from \"../../../Models/TileRange\"\nimport { GeoOperations } from \"../../GeoOperations\"\nimport DynamicTileSource from \"./DynamicTileSource\"\n\n/**\n * The PolygonSourceMerger receives various small pieces of bigger polygons and stitches them together.\n * This is used to reconstruct polygons of vector tiles\n */\nexport class LineSourceMerger extends DynamicTileSource<FeatureSourceForTile> {\n    private readonly _zoomlevel: Store<number>\n\n    constructor(\n        zoomlevel: Store<number>,\n        minzoom: number,\n        constructSource: (tileIndex: number) => FeatureSourceForTile,\n        mapProperties: {\n            bounds: Store<BBox>\n            zoom: Store<number>\n        },\n        options?: {\n            isActive?: Store<boolean>\n        },\n    ) {\n        super(zoomlevel, minzoom, constructSource, mapProperties, options)\n        this._zoomlevel = zoomlevel\n    }\n\n    protected addDataFromSources(sources: FeatureSourceForTile[]) {\n        sources = Utils.NoNull(sources)\n        const all: Map<string, Feature<MultiLineString>> = new Map()\n        const currentZoom = this._zoomlevel?.data ?? 0\n        for (const source of sources) {\n            if(source.z != currentZoom){\n                continue\n            }\n            const bboxCoors = Tiles.tile_bounds_lon_lat(source.z, source.x, source.y)\n            const bboxGeo = new BBox(bboxCoors).asGeoJson({})\n            for (const f of source.features.data) {\n                const id = f.properties.id\n                const coordinates : Position[][] = []\n                if(f.geometry.type === \"LineString\"){\n                    coordinates.push(f.geometry.coordinates)\n                }else if(f.geometry.type === \"MultiLineString\"){\n                    coordinates.push(...f.geometry.coordinates)\n                }else {\n                    console.error(\"Invalid geometry type:\", f.geometry.type)\n                    continue\n                }\n                const oldV = all.get(id)\n                if(!oldV){\n\n                all.set(id, {\n                    type: \"Feature\",\n                    properties: f.properties,\n                    geometry:{\n                        type:\"MultiLineString\",\n                        coordinates\n                    }\n                })\n                    continue\n                }\n                oldV.geometry.coordinates.push(...coordinates)\n            }\n        }\n\n        const keys = Array.from(all.keys())\n        for (const key of keys) {\n            all.set(key, <any> GeoOperations.attemptLinearize(<Feature<MultiLineString>>all.get(key)))\n        }\n        const newList = Array.from(all.values())\n        this.features.setData(newList)\n        this._featuresById.setData(all)\n    }\n\n}\n","import { FeatureSourceForTile } from \"../FeatureSource\"\nimport { Store } from \"../../UIEventSource\"\nimport { BBox } from \"../../BBox\"\nimport { Utils } from \"../../../Utils\"\nimport { Feature } from \"geojson\"\nimport { GeoOperations } from \"../../GeoOperations\"\nimport DynamicTileSource from \"./DynamicTileSource\"\n\n/**\n * The PolygonSourceMerger receives various small pieces of bigger polygons and stitches them together.\n * This is used to reconstruct polygons of vector tiles\n */\nexport class PolygonSourceMerger extends DynamicTileSource<FeatureSourceForTile> {\n    constructor(\n        zoomlevel: Store<number>,\n        minzoom: number,\n        constructSource: (tileIndex: number) => FeatureSourceForTile,\n        mapProperties: {\n            bounds: Store<BBox>\n            zoom: Store<number>\n        },\n        options?: {\n            isActive?: Store<boolean>\n        },\n    ) {\n        super(zoomlevel, minzoom, constructSource, mapProperties, options)\n    }\n\n    protected addDataFromSources(sources: FeatureSourceForTile[]) {\n        sources = Utils.NoNull(sources)\n        const all: Map<string, Feature> = new Map()\n        const zooms: Map<string, number> = new Map()\n\n        for (const source of sources) {\n            let z = source.z\n            for (const f of source.features.data) {\n                const id = f.properties.id\n                if (id.endsWith(\"146616907\")) {\n                    console.log(\"Horeca totaal\")\n                }\n                if (!all.has(id)) {\n                    // No other parts of this polygon have been seen before, simply add it\n                    all.set(id, f)\n                    zooms.set(id, z)\n                    continue\n                }\n\n                // A part of this object has been seen before, eventually from a different zoom level\n                const oldV = all.get(id)\n                const oldZ = zooms.get(id)\n                if (oldZ > z) {\n                    // The store contains more detailed information, so we ignore this part which has a lower accuraccy\n                    continue\n                }\n                if (oldZ < z) {\n                    // The old value has worse accuracy then what we receive now, we throw it away\n                    all.set(id, f)\n                    zooms.set(id, z)\n                    continue\n                }\n                const merged = GeoOperations.union(f, oldV)\n                merged.properties = oldV.properties\n                all.set(id, merged)\n                zooms.set(id, z)\n            }\n        }\n\n        const newList = Array.from(all.values())\n        this.features.setData(newList)\n        this._featuresById.setData(all)\n    }\n\n}\n","import { Store } from \"../../UIEventSource\"\nimport DynamicTileSource from \"./DynamicTileSource\"\nimport { Utils } from \"../../../Utils\"\nimport { BBox } from \"../../BBox\"\nimport LayerConfig from \"../../../Models/ThemeConfig/LayerConfig\"\nimport MvtSource from \"../Sources/MvtSource\"\nimport { Tiles } from \"../../../Models/TileRange\"\nimport Constants from \"../../../Models/Constants\"\nimport FeatureSourceMerger from \"../Sources/FeatureSourceMerger\"\nimport { LineSourceMerger } from \"./LineSourceMerger\"\nimport { PolygonSourceMerger } from \"./PolygonSourceMerger\"\n\n\nclass PolygonMvtSource extends PolygonSourceMerger{\n    constructor( layer: LayerConfig,\n                 mapProperties: {\n                     zoom: Store<number>\n                     bounds: Store<BBox>\n                 },\n                 options?: {\n                     isActive?: Store<boolean>\n                 }) {\n        const roundedZoom = mapProperties.zoom.mapD(z => Math.min(Math.floor(z/2)*2, 14))\n        super(\n            roundedZoom,\n            layer.minzoom,\n            (zxy) => {\n                const [z, x, y] = Tiles.tile_from_index(zxy)\n                const url = Utils.SubstituteKeys(Constants.VectorTileServer,\n                    {\n                        z, x, y, layer: layer.id,\n                        type: \"polygons\",\n                    })\n                return new MvtSource(url, x, y, z)\n            },\n            mapProperties,\n            {\n                isActive: options?.isActive,\n            })\n    }\n}\n\n\nclass LineMvtSource extends LineSourceMerger{\n    constructor( layer: LayerConfig,\n                 mapProperties: {\n                     zoom: Store<number>\n                     bounds: Store<BBox>\n                 },\n                 options?: {\n                     isActive?: Store<boolean>\n                 }) {\n        const roundedZoom = mapProperties.zoom.mapD(z => Math.min(Math.floor(z/2)*2, 14))\n        super(\n            roundedZoom,\n            layer.minzoom,\n            (zxy) => {\n                const [z, x, y] = Tiles.tile_from_index(zxy)\n                const url = Utils.SubstituteKeys(Constants.VectorTileServer,\n                    {\n                        z, x, y, layer: layer.id,\n                        type: \"lines\",\n                    })\n                return new MvtSource(url, x, y, z)\n            },\n            mapProperties,\n            {\n                isActive: options?.isActive,\n            })\n    }\n}\n\n\nclass PointMvtSource extends DynamicTileSource {\n\n    constructor(\n        layer: LayerConfig,\n        mapProperties: {\n            zoom: Store<number>\n            bounds: Store<BBox>\n        },\n        options?: {\n            isActive?: Store<boolean>\n        },\n    ) {\n        const roundedZoom = mapProperties.zoom.mapD(z => Math.min(Math.floor(z/2)*2, 14))\n        super(\n            roundedZoom,\n            layer.minzoom,\n            (zxy) => {\n                const [z, x, y] = Tiles.tile_from_index(zxy)\n                const url = Utils.SubstituteKeys(Constants.VectorTileServer,\n                    {\n                        z, x, y, layer: layer.id,\n                        type: \"pois\",\n                    })\n                return new MvtSource(url, x, y, z)\n            },\n            mapProperties,\n            {\n                isActive: options?.isActive,\n            },\n        )\n    }\n}\n\nexport default class DynamicMvtileSource extends FeatureSourceMerger {\n\n    constructor(\n        layer: LayerConfig,\n        mapProperties: {\n            zoom: Store<number>\n            bounds: Store<BBox>\n        },\n        options?: {\n            isActive?: Store<boolean>\n        },\n    ) {\n        super(\n            new PointMvtSource(layer, mapProperties, options),\n            new LineMvtSource(layer, mapProperties, options),\n            new PolygonMvtSource(layer, mapProperties, options)\n\n        )\n    }\n}\n"],"names":["DynamicTileSource","FeatureSourceMerger","zoomlevel","minzoom","constructSource","mapProperties","options","loadedTiles","Stores","bounds","z","tileRange","Tiles","needed","x","y","i","neededIndexes","neededIndex","pbf","Pbf","ieee754","require$$0","buf","SHIFT_LEFT_32","SHIFT_RIGHT_32","TEXT_DECODER_MIN_LENGTH","utf8TextDecoder","readField","result","end","val","tag","startPos","readUInt32","readInt32","isSigned","b","readVarintRemainder","num","pos","readUtf8TextDecoder","readUtf8","buffer","arr","readPackedEnd","type","min","length","writeInt32","writeBigVarint","str","writeUtf8","len","makeRoomForExtraLength","fn","obj","writePackedVarint","writePackedSVarint","writePackedBoolean","writePackedFloat","writePackedDouble","writePackedFixed32","writePackedSFixed32","writePackedFixed64","writePackedSFixed64","l","s","p","h","toNum","low","high","writeBigVarintLow","writeBigVarintHigh","lsb","extraLen","b0","c","bytesPerSequence","b1","b2","b3","lead","compile_1","compile","version","proto","code","compileRaw","pre","context","buildDefaults","buildContext","writeContext","ctx","writeMessage","writeEnum","name","fields","numRepeated","compileExport","compileDest","field","readCode","compileFieldRead","packed","willSupportPacked","compileMapRead","writeCode","isPacked","compileRepeatedWrite","compileMapWrite","compileFieldWrite","getDefaultWriteTest","exportsVar","props","isEnum","getType","getMapMessageName","path","fieldType","prefix","signed","suffix","postfix","getMapField","getMapMessage","parent","getDefaultValue","value","setPackedOption","syntax","setDefaultValue","enumValues","explicitDefault","def","tokenize","sch","noComments","line","noMultilineComments","inside","token","trim","removeQuotedLines","list","restoreQuotedLines","re","m","replacements","MAX_RANGE","PACKABLE_TYPES","onfieldoptionvalue","tokens","onfieldoptions","opts","lastFieldName","opt","n","index","onfield","t","onmessagebody","body","onenum","onmessage","onextensions","onextend","onoption","out","from","to","lvl","msg","onpackagename","onsyntaxversion","onenumvalue","e","parse","hasBracket","onoptionMap","map","key","onimport","file","onservice","service","onrpc","rpc","j","schema","firstline","ext","fieldSplit","messageName","nestedEnumName","message","enumNameIsFieldType","en","enumNameIsNestedEnumName","parse_1","f","oneofs","v","o","keys","option","k","onservices","indent","stringify","require$$1","protocolBuffersSchemaModule","_MvtFeatureBuilder","extent","__publicField","ring","sum","p1","p2","rings","polygons","currentPolygon","area","geometry","typeIndex","properties","coords","classified","points","polygonCoords","cX","cY","coordss","currentRing","commandInteger","commandId","commandCount","dx","dy","y0","x0","size","y2","MvtFeatureBuilder","_MvtSource","url","layerName","isActive","UIEventSource","fs","d","data","layers","layer","builder","features","feature","tags","values","pbfCompile.default","pbfCompile","PbfSchema.parse","MvtSource","LineSourceMerger","sources","Utils","all","currentZoom","_a","source","bboxCoors","BBox","id","coordinates","oldV","GeoOperations","newList","PolygonSourceMerger","zooms","oldZ","merged","PolygonMvtSource","roundedZoom","zxy","Constants","LineMvtSource","PointMvtSource","DynamicMvtileSource"],"mappings":"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","x_google_ignoreList":[1,2,3,4,5,6]}