import{S as G,i as H,s as J,z as I,d as g,A as K,g as m,C as N,t as _,h as d,D as q,V as L,n as S,F as O,e as w,b,_ as Q,$ as U,c as R,a as W,m as T,r as X,j as y}from"./tw-merge-8b89dba1.js";import"./LocalStorageSource-78a030c5.js";import"./Utils-498bb79d.js";import{T as v,a as E}from"./Tr-76fd307f.js";import"./SubtleLink-5226aa3d.js";import"./Constants-203b4dea.js";import{u as Y}from"./TagRenderingAnswer-98234f50.js";function z(u,e,t){const a=u.slice();return a[12]=e[t],a}function Z(u){let e,t=[],a=new Map,i,s=u[7];const o=n=>n[12].id;for(let n=0;n<s.length;n+=1){let l=z(u,s,n),r=o(l);a.set(r,t[n]=F(r,l))}return{c(){e=w("div");for(let n=0;n<t.length;n+=1)t[n].c();b(e,"class","selected-element-view flex h-full w-full flex-col gap-y-2 overflow-y-auto p-1 px-4"),b(e,"tabindex","-1")},m(n,l){g(n,e,l);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null);i=!0},p(n,l){l&159&&(s=n[7],K(),t=Q(t,l,o,1,n,s,a,e,U,F,null,z),N())},i(n){if(!i){for(let l=0;l<s.length;l+=1)_(t[l]);i=!0}},o(n){for(let l=0;l<t.length;l+=1)m(t[l]);i=!1},d(n){n&&d(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}function $(u){let e,t,a,i,s,o,n,l;return t=new v({props:{t:E.t.delete.isDeleted}}),s=new v({props:{t:E.t.general.returnToTheMap}}),{c(){e=w("div"),R(t.$$.fragment),a=W(),i=w("button"),R(s.$$.fragment),b(e,"aria-live","assertive"),b(i,"class","w-full")},m(r,c){g(r,e,c),T(t,e,null),g(r,a,c),g(r,i,c),T(s,i,null),o=!0,n||(l=X(i,"click",u[10]),n=!0)},p:S,i(r){o||(_(t.$$.fragment,r),_(s.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(s.$$.fragment,r),o=!1},d(r){r&&d(e),y(t),r&&d(a),r&&d(i),y(s),n=!1,l()}}}function x(u){let e,t,a;return t=new v({props:{t:E.t.delete.isChanged}}),{c(){e=w("div"),R(t.$$.fragment),b(e,"class","alert"),b(e,"aria-live","assertive")},m(i,s){g(i,e,s),T(t,e,null),a=!0},p:S,i(i){a||(_(t.$$.fragment,i),a=!0)},o(i){m(t.$$.fragment,i),a=!1},d(i){i&&d(e),y(t)}}}function F(u,e){let t,a,i;return a=new Y({props:{tags:e[4],config:e[12],state:e[0],selectedElement:e[2],layer:e[1],highlightedRendering:e[3],clss:e[7].length===1?"h-full":"tr-length-"+e[7].length}}),{key:u,first:null,c(){t=I(),R(a.$$.fragment),this.first=t},m(s,o){g(s,t,o),T(a,s,o),i=!0},p(s,o){e=s;const n={};o&16&&(n.tags=e[4]),o&128&&(n.config=e[12]),o&1&&(n.state=e[0]),o&4&&(n.selectedElement=e[2]),o&2&&(n.layer=e[1]),o&8&&(n.highlightedRendering=e[3]),o&128&&(n.clss=e[7].length===1?"h-full":"tr-length-"+e[7].length),a.$set(n)},i(s){i||(_(a.$$.fragment,s),i=!0)},o(s){m(a.$$.fragment,s),i=!1},d(s){s&&d(t),y(a,s)}}}function ee(u){let e,t,a,i;const s=[x,$,Z],o=[];function n(l,r){return l[5]?l[6]._deleted==="yes"?1:2:0}return e=n(u),t=o[e]=s[e](u),{c(){t.c(),a=I()},m(l,r){o[e].m(l,r),g(l,a,r),i=!0},p(l,[r]){let c=e;e=n(l),e===c?o[e].p(l,r):(K(),m(o[c],1,1,()=>{o[c]=null}),N(),t=o[e],t?t.p(l,r):(t=o[e]=s[e](l),t.c()),_(t,1),t.m(a.parentNode,a))},i(l){i||(_(t),i=!0)},o(l){m(t),i=!1},d(l){o[e].d(l),l&&d(a)}}}function te(u,e,t){var P,V;let a,i,s=S,o=()=>(s(),s=O(h,f=>t(6,i=f)),h),n;u.$$.on_destroy.push(()=>s());let{state:l}=e,{layer:r}=e,{selectedElement:c}=e,{highlightedRendering:D=void 0}=e,{tags:h=(P=l==null?void 0:l.featureProperties)==null?void 0:P.getStore(c.properties.id)}=e;o();let A=h.map(f=>{var p,k;return!((p=r==null?void 0:r.source)!=null&&p.osmTags)||((k=r.source.osmTags)==null?void 0:k.matchesProperties(f))});q(u,A,f=>t(5,a=f));let C;(V=l==null?void 0:l.userRelatedState)!=null&&V.preferencesAsTags&&L(l.userRelatedState.preferencesAsTags.addCallbackAndRun(f=>{C=f}));let M=h.mapD(f=>r.tagRenderings.filter(p=>{var k,j;return(((k=p.condition)==null?void 0:k.matchesProperties(f))??!0)&&(((j=p.metacondition)==null?void 0:j.matchesProperties({...f,...C}))??!0)&&p.IsKnown(f)}));q(u,M,f=>t(7,n=f));const B=()=>l.selectedElement.setData(void 0);return u.$$set=f=>{"state"in f&&t(0,l=f.state),"layer"in f&&t(1,r=f.layer),"selectedElement"in f&&t(2,c=f.selectedElement),"highlightedRendering"in f&&t(3,D=f.highlightedRendering),"tags"in f&&o(t(4,h=f.tags))},[l,r,c,D,h,a,i,n,A,M,B]}class fe extends G{constructor(e){super(),H(this,e,te,ee,J,{state:0,layer:1,selectedElement:2,highlightedRendering:3,tags:4})}}export{fe as S};
//# sourceMappingURL=SelectedElementView-2fc35bf3.js.map
